var map,geocoder,markers=[];function LoadProgrammes(e,t,s){return full_url=window.location.href,path_url=window.location.pathname,home_url=full_url.replace(path_url,""),ajax_url=home_url+"/wp-admin/admin-ajax.php",$.ajax({url:ajax_url,type:"post",data:{action:"load_programmes",region:e,type_business:t,type_support:s},beforeSend:function(e){},success:function(e){$("#response-programmes").html(e)}}),!1}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:54.4071355,lng:-1.7539647},zoom:6,zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,styles:[{featureType:"administrative",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100},{lightness:"50"},{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"all",stylers:[{lightness:"30"}]},{featureType:"road.local",elementType:"all",stylers:[{lightness:"40"}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"water",elementType:"all",stylers:[{color:"#d2d2d2"},{visibility:"on"}]},{featureType:"water",elementType:"labels",stylers:[{lightness:-25},{saturation:-100}]}]}),geocoder=new google.maps.Geocoder}function SearchMarkers(){var e=$("#search_markers").data("url"),t=$("#input_address").val(),s=$("#input_business option:selected").text();return $.ajax({url:e,type:"post",data:{action:"load_posts",speciality:s},beforeSend:function(e){},success:function(e){$("#map-container").html(e),$("#map-container").css("visibility","hidden"),show_results(t)}}),!1}function show_results(e){setMapOnAll(null),markers=[],add_markers(),find_addres(e)}function setMapOnAll(){for(var e=0;e<markers.length;e++)markers[e].setMap(null)}function add_markers(){array_lat=$("#loop-location").data("lat"),array_lng=$("#loop-location").data("lng"),array_description=$("#loop-location").data("description");for(var e=0;e<array_lat.length;e++){var t=array_lat[e],s=array_lng[e],a=new google.maps.LatLng(t,s),r=array_description[e];markers[e]=new google.maps.Marker({position:a,map:map,description:r,id:e,icon:"http://localhost:8019/wp-content/themes/scaleUpTheme/assets/images/marker.png",animation:google.maps.Animation.DROP})}}function find_addres(e){geocoder.geocode({address:e},function(e,t){if("OK"==t){var s=e[0].geometry.location;map.setCenter();new google.maps.Marker({map:map,icon:"http://localhost:8019/wp-content/themes/scaleUpTheme/assets/images/location.png",position:s});calculate_distances(s.lat(),s.lng())}else alert("Geocode was not successful for the following reason: "+t)})}function calculate_distances(e,t){var s=Math.PI,a=[],r=-1;for(lat1=e,lon1=t,i=0;i<markers.length;i++){var o=markers[i].position.lat(),n=markers[i].position.lng(),l=(o-lat1)*(s/180),c=(n-lon1)*(s/180),p=lat1*(s/180),d=o*(s/180),u=Math.sin(l/2)*Math.sin(l/2)+Math.sin(c/2)*Math.sin(c/2)*Math.cos(p)*Math.cos(d),m=6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)));a[i]=m,(-1==r||m<a[r])&&(r=i)}distances_sorted=Array.from(a),distances_sorted.sort(function(e,t){return e-t});var h=new Array;for(i=0;i<distances_sorted.length;i++)for(dist_sort=distances_sorted[i],j=0;j<a.length;j++)dist=a[j],dist_sort==dist&&(h.push(markers[j]),$("#cards-list .card").eq(j).attr("id",i));markers=h,sort_results()}function sort_results(){$("#cards-list .card").sort(function(e,t){return parseInt(e.id)-parseInt(t.id)}).each(function(){var e=$(this);e.remove(),$(e).appendTo("#cards-list")}),$("#map-container").css("visibility","visible")}function redirectTo(e){window.location.href=e}$(document).ready(function(){$("#submit-form").click(function(){SearchMarkers()}),$("input").on("keypress",function(e){13==(e.keyCode||e.which)&&SearchMarkers()}),$("body").on("mouseenter",".card",function(){$(this).css("background-color","#fdd38d"),index=$(this).attr("id");markers[index].setIcon("http://localhost:8019/wp-content/themes/scaleUpTheme/assets/images/marker_hover.png")}),$("body").on("mouseleave",".card",function(){$(this).css("background-color","white");markers[index].setIcon("http://localhost:8019/wp-content/themes/scaleUpTheme/assets/images/marker.png")}),$(".custom-link").mouseenter(function(){$(this).hasClass("active")||($(this).find(".line").removeClass("leaveLink"),$(this).find(".line").addClass("overLink"))}),$(".custom-link").mouseleave(function(){$(this).hasClass("active")||($(this).find(".line").removeClass("overLink"),$(this).find(".line").addClass("leaveLink"))});var e=1;if($(".slider").length>0){setInterval(function(){size=$(".text-slide").length,last=size-1,console.log(e),$(".text-slide").hide(),$(".text-slide").eq(e).fadeIn("slow"),(e+=1)==size&&(e=0)},1e4)}$("body").on("click",".submit-search",function(){array_region=[],array_business=[],array_support=[],region=$("#dropdown-region :selected").val(),type_business=$("#dropdown-type-business :selected").val(),type_support=$("#dropdown-type-support :selected").val(),""!=region&&array_region.push(region),""!=type_business&&array_business.push(type_business),""!=array_support&&array_support.push(type_support),LoadProgrammes(array_region,array_business,array_support)}),$("body").on("click",".one-to-watch",function(){$(this).find(".checkbox .fas").toggle()}),$("body").on("click",".endorsed",function(){$(this).find(".checkbox .fas").toggle()}),$("body").on("click",".more-filters",function(){$(".filters-window").fadeIn("slow")})}),$(window).on("load",function(){$(".programmes-list").length>0&&LoadProgrammes()});