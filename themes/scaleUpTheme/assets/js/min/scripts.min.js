var map,geocoder,home_url,markers=[],array_region=[],array_business=[],array_support=[],array_aims=[],array_cost=[],array_types=[],array_providers=[],one_to_watch=0,endorsed=0,posts_per_page=8,scrollingChapters=0,current_page=1,signedUp=(posts_per_page=10,!1),show_signup=!1;$(document).ready(function(){protocol=window.location.protocol,host=window.location.host,home_url=protocol+"//"+host,$("#submit-form").click(function(){SearchMarkers()}),$("input").on("keypress",function(e){13==(e.keyCode||e.which)&&SearchMarkers()}),$("body").on("mouseenter",".card",function(){protocol=window.location.protocol,host=window.location.host,home_url=protocol+"//"+host,$(this).css("background-color","#fdd38d"),index=$(this).attr("id");var e=home_url+"/wp-content/themes/scaleUpTheme/assets/images/marker_hover.png";markers[index].setIcon(e)}),$("body").on("mouseleave",".card",function(){protocol=window.location.protocol,host=window.location.host,home_url=protocol+"//"+host,$(this).css("background-color","white");var e=home_url+"/wp-content/themes/scaleUpTheme/assets/images/marker.png";markers[index].setIcon(e)}),$(".custom-link").mouseenter(function(){$(this).hasClass("active")||($(this).find(".line").removeClass("leaveLink"),$(this).find(".line").addClass("overLink"))}),$(".custom-link").mouseleave(function(){$(this).hasClass("active")||($(this).find(".line").removeClass("overLink"),$(this).find(".line").addClass("leaveLink"))});var e=1;if($(".slider").length>0){setInterval(function(){size=$(".text-slide").length,last=size-1,$(".text-slide").hide(),$(".text-slide").eq(e).fadeIn("slow"),(e+=1)==size&&(e=0)},1e4)}$("body").on("click",".ambassadors-list .submit-search",function(){lep=$("#dropdown-lep :selected").val(),sector=$("#dropdown-sector :selected").val(),LoadAmbassadors(lep,sector)}),$("body").on("click",".programmes-list .submit-search",function(){array_region=[],array_business=[],array_support=[],array_aims=[],array_cost=[],array_types=[],array_providers=[],$(".tick input:checkbox").prop("checked",!1),region=$("#dropdown-region :selected").val(),type_business=$("#dropdown-type-business :selected").val(),type_support=$("#dropdown-type-support :selected").val(),""!=region&&array_region.push(region),""!=type_business&&array_business.push(type_business),""!=type_support&&array_support.push(type_support),current_page=1,LoadProgrammes("",array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed),checkbox_region="#checkbox-"+region,checkbox_business="#checkbox-"+type_business,checkbox_support="#checkbox-"+type_support,$(checkbox_region).prop("checked",!0),$(checkbox_business).prop("checked",!0),$(checkbox_support).prop("checked",!0)}),$("body").on("click",".one-to-watch",function(){0==one_to_watch?(one_to_watch=1,$(this).find(".checkbox .fas").css("display","block")):(one_to_watch=0,$(this).find(".checkbox .fas").css("display","none")),current_page=1,LoadProgrammes("",array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed)}),$("body").on("click",".endorsed",function(){$(this).find(".checkbox .fas").toggle(),0==endorsed?(endorsed=1,$(this).find(".checkbox .fas").css("display","block")):(endorsed=0,$(this).find(".checkbox .fas").css("display","none")),current_page=1,LoadProgrammes("",array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed)}),$("body").on("click",".more-filters",function(){$(".filters-window").fadeIn("slow"),$(".close-filters").show()}),$("body").on("click",".close-filters",function(){$(".close-filters").hide(),$(".filters-window").fadeOut("slow")}),$("body").on("click",".clear-btn",function(){return $("input:checkbox").removeAttr("checked"),current_page=1,posts_per_page=10,LoadProgrammes("",array_region=[],array_business=[],array_support=[],array_aims=[],array_cost=[],array_types=[],array_providers=[],one_to_watch,endorsed),section=".all-programmes",$("html, body").animate({scrollTop:$(section).offset().top},500,function(){$(".close-filters").hide(),$(".filters-window").fadeOut(600)}),$("#dropdown-region").val(""),$("#dropdown-type-business").val(""),$("#dropdown-type-support").val(""),!1}),$("body").on("click",".filter-btn",function(){return array_region=$("input[name=checkbox-region]:checked").map(function(){return $(this).val()}).get(),array_business=$("input[name=checkbox-business]:checked").map(function(){return $(this).val()}).get(),array_support=$("input[name=checkbox-support]:checked").map(function(){return $(this).val()}).get(),array_aims=$("input[name=checkbox-aim]:checked").map(function(){return $(this).val()}).get(),array_cost=$("input[name=checkbox-cost]:checked").map(function(){return $(this).val()}).get(),array_types=$("input[name=checkbox-type]:checked").map(function(){return $(this).val()}).get(),array_providers=$("input[name=checkbox-provider]:checked").map(function(){return $(this).val()}).get(),current_page=1,posts_per_page=-1,LoadProgrammes("",array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed),section=".all-programmes",$("html, body").animate({scrollTop:$(section).offset().top},500,function(){$(".close-filters").hide(),$(".filters-window").fadeOut(600)}),$("#dropdown-region").val(""),$("#dropdown-type-business").val(""),$("#dropdown-type-support").val(""),!1}),$("body").on("click",".next-btn",function(){current_page=parseInt(current_page)+1,LoadProgrammes("",array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed)}),$("body").on("click",".prev-btn",function(){current_page=parseInt(current_page)-1,LoadProgrammes("",array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed)}),$("body").on("click",".changePage",function(){new_page=$(this).val(),current_page=new_page,LoadProgrammes("",array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed)}),$("body").on("click",".all-stories",function(){num_posts=parseInt(posts_per_page),LoadStories(posts_per_page=num_posts+8)}),$("body").on("click",".static-menu .chapter .header",function(){index=$(this).index(".static-menu .chapter .header"),parent=".static-menu",img=$(parent+" .chapter .header img").eq(index),img.hasClass("arrow-down")?($(parent+" .chapter .content").not(":eq("+index+")").collapse("hide"),$(parent+" .chapter .header img").removeClass("arrow-up"),$(parent+" .chapter .header img").addClass("arrow-down"),img.removeClass("arrow-down"),img.addClass("arrow-up"),$(parent+" .chapter .content").eq(index).collapse("show")):img.hasClass("arrow-up")&&(img.removeClass("arrow-up"),img.addClass("arrow-down"),$(parent+" .chapter .content").eq(index).collapse("hide")),parent=".fixed-menu",img=$(parent+" .chapter .header img").eq(index),img.hasClass("arrow-down")?($(parent+" .chapter .content").not(":eq("+index+")").collapse("hide"),$(parent+" .chapter .header img").removeClass("arrow-up"),$(parent+" .chapter .header img").addClass("arrow-down"),img.removeClass("arrow-down"),img.addClass("arrow-up"),$(parent+" .chapter .content").eq(index).collapse("show")):img.hasClass("arrow-up")&&(img.removeClass("arrow-up"),img.addClass("arrow-down"),$(parent+" .chapter .content").eq(index).collapse("hide"))}),$("body").on("click",".fixed-menu .chapter .header",function(){index=$(this).index(".fixed-menu .chapter .header"),parent=".fixed-menu",img=$(parent+" .chapter .header img").eq(index),img.hasClass("arrow-down")?($(parent+" .chapter .content").not(":eq("+index+")").collapse("hide"),$(parent+" .chapter .header img").removeClass("arrow-up"),$(parent+" .chapter .header img").addClass("arrow-down"),img.removeClass("arrow-down"),img.addClass("arrow-up"),$(parent+" .chapter .content").eq(index).collapse("show")):img.hasClass("arrow-up")&&(img.removeClass("arrow-up"),img.addClass("arrow-down"),$(parent+" .chapter .content").eq(index).collapse("hide")),parent=".static-menu",img=$(parent+" .chapter .header img").eq(index),img.hasClass("arrow-down")?($(parent+" .chapter .content").not(":eq("+index+")").collapse("hide"),$(parent+" .chapter .header img").removeClass("arrow-up"),$(parent+" .chapter .header img").addClass("arrow-down"),img.removeClass("arrow-down"),img.addClass("arrow-up"),$(parent+" .chapter .content").eq(index).collapse("show")):img.hasClass("arrow-up")&&(img.removeClass("arrow-up"),img.addClass("arrow-down"),$(parent+" .chapter .content").eq(index).collapse("hide"))}),$("body").on("click",".load-chapter",function(){chapter=$(this).data("article"),LoadChapter(chapter,"fullmenu")}),$("body").on("click",".goto-chapter",function(){chapter=$(this).data("article"),LoadChapter(chapter,"fullmenu")}),$("body").on("click",".short-menu .chapter",function(){first_chapter=$(this).data("chapter"),LoadChapter(first_chapter,"shortmenu")}),$("body").on("click",".open-content",function(){index=$(".open-content").index(this),$(".content-piece").hide(),$(".content-piece").eq(index).slideDown("slow"),$("html, body").animate({scrollTop:$(".content-piece").eq(index).offset().top-50},1100),console.log(index),index<1?$(".nav-collection .prev").hide():$(".nav-collection .prev").show()}),$("body").on("click",".close-content",function(){$(".content-box").fadeIn(),$(".content-piece").slideUp("slow")}),$("body").on("click",".nav-collection .next",function(){current_piece=$(".content-piece:visible")[0],index=$(".content-piece").index(current_piece),total=$(".content-piece").length,void 0!==current_piece?index_next=index+1:index_next=0,index_next<total?($(".content-piece").hide(),$(".content-piece").eq(index_next).slideDown("slow"),$("html, body").animate({scrollTop:$(".content-piece").eq(index_next).offset().top-50},1100)):(chapter=$(".module-content-collection").data("next"),LoadChapter(chapter,"fullmenu")),index_prev=index_next-2,index_prev<-1?$(".nav-collection .prev").hide():$(".nav-collection .prev").show()}),$("body").on("click",".nav-collection .prev",function(){current_piece=$(".content-piece:visible")[0],index=$(".content-piece").index(current_piece),total=$(".content-piece").length,index_prev=index-1,index_prev>=0?($(".content-piece").hide(),$(".content-piece").eq(index_prev).slideDown("slow"),$("html, body").animate({scrollTop:$(".content-piece").eq(index_prev).offset().top-50},1100)):(chapter=$(".module-content-collection").data("prev"),chapter?LoadChapter(chapter,"fullmenu"):$(".content-piece").hide()),index_prev<1?$(".nav-collection .prev").hide():$(".nav-collection .prev").show()}),$("body").on("click",".area",function(){$("#response-area").show(),$(".list-areas-section").hide(),area_id=$(this).data("area"),LoadArea(area_id)}),$("body").on("click",".close-area",function(){$("#response-area").empty(),$("#response-area").hide(),$(".list-areas-section").show()}),$(".open-vacancy button").click(function(){index=$(this).index(".open-vacancy button"),current_vacancy=$(".vacancy-info").eq(index),button_span=$(".open-vacancy button span").eq(index),current_vacancy.hasClass("show")?(button_span.text("View"),current_vacancy.collapse("toggle")):(button_span.text("Close"),current_vacancy.collapse("toggle"))});var o=!1;$("#open-btn").click(function(){o?($("#sidebar .sidebar-nav").fadeOut("fast",function(){$("#sidebar").animate({width:"toggle"},350)}),$(this).addClass("close-anim"),o=!1):($("#sidebar").animate({width:"toggle"},{duration:350,complete:function(){$("#sidebar .sidebar-nav").fadeIn()}}),$(this).removeClass("close-anim"),o=!0)}),$(".open-search").click(function(){$(".search-box").slideDown("slow",function(){$(".search-content").fadeIn("fast"),$("#query-search").focus()})}),$(".close-search").click(function(){$(".search-content").fadeOut("fast",function(){$(".search-box").slideUp("slow")})}),$("#query-search").on("change keydown paste input",function(){s=$(this).val(),LoadSearchResults(s)}),$(".chapters-list").on("scroll",function(){index=$(this).index(".chapters-list");var e=$(".chapters-list").eq(index).scrollTop();scrollingChapters=e}),$(".slider-banner .show-item").click(function(){index=$(this).index(".slider-banner .show-item"),$(".slider-banner .item").not(":eq("+index+")").hide(),$(".slider-banner .item").eq(index).show()}),$(".open-committee").click(function(){span_committee=$(this).find("span"),text_committe=span_committee.text(),"View"==text_committe?span_committee.text("Close"):span_committee.text("View")}),$("#modalNewsletter").on("hide.bs.modal",function(){!signedUp&&show_signup&&setCookie("hideSignUp",1,60)}),$("#modalNewsletter input[type='submit']").click(function(){setCookie("alreadySignedUp",1,365),signedUp=!0})}),$(window).on("load",function(){($(".programmes-list").length>0&&LoadProgrammes("onload",array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed),$(".list-stories").length>0&&LoadStories(posts_per_page),$(".scaleup-review").length>0)&&(""==window.location.hash.substring(1)&&(chapter="first",LoadChapter(chapter,"onload")));$(".ambassadors-list").length>0&&LoadAmbassadors();var e=window.location.pathname;if("/insights/"==e||"/insights"==e){var o=getCookie("hideSignUp");alreadySignedUp=getCookie("alreadySignedUp"),1==o||1==alreadySignedUp||(show_signup=!0,setTimeout(function(){$("#modalNewsletter").modal("show")},12e3))}}),$hidden=!1;var lastScrollTop=0;if($(window).scroll(function(){if(window.innerWidth>992&&$(".scaleup-review").length>0){var e=$(window).scrollTop();elemTop=$(".menu").offset().top,elemBottom=elemTop+$(".menu").height();var o=$(this).scrollTop();o>lastScrollTop?!$hidden&&e>elemTop&&($(".fixed-menu").show(),$(".static-menu").hide(),$hidden=!0):$hidden&&elemBottom>e-102&&($(".fixed-menu").hide(),$(".static-menu").show(),$hidden=!1),lastScrollTop=o,$(".chapters-list").scrollTop(scrollingChapters)}}),window.location.hash&&(url=window.location.href,url.includes("scaleup-review"))){protocol=window.location.protocol,host=window.location.host,home_url=protocol+"//"+host;var host=window.location.host;home_url="https://"+host;var fragment=window.location.hash.substring(1);chapter=fragment,LoadChapter(chapter,"fullmenu")}function LoadProgrammes(e,o,a,t,r,n,s,i,c,l){return protocol=window.location.protocol,host=window.location.host,home_url=protocol+"//"+host,ajax_url=home_url+"/wp-admin/admin-ajax.php",$.ajax({url:ajax_url,type:"post",data:{action:"load_programmes",current_page:current_page,posts_per_page:posts_per_page,posts_per_page:posts_per_page,region:o,type_business:a,type_support:t,aims:r,costs:n,types:s,providers:i,one_to_watch:c,endorsed:l},beforeSend:function(e){},success:function(o){"onload"==e?$("#response-programmes").html(o):($("#response-programmes").html(o),$("html, body").scrollTop($("#response-programmes").offset().top-100))}}),!1}function LoadChapter(e,o){return protocol=window.location.protocol,host=window.location.host,home_url=protocol+"//"+host,ajax_url=home_url+"/wp-admin/admin-ajax.php",$.ajax({url:ajax_url,type:"post",data:{action:"load_chapter",chapter:e},beforeSend:function(e){},success:function(e){"shortmenu"==o?($("#response-chapter").html(e),$("html, body").animate({scrollTop:$("#response-chapter").offset().top},"slow")):"onload"==o?$("#response-chapter").html(e):($("#response-chapter").height()>500?moveTop=!0:moveTop=!1,$("#response-chapter").html(e),moveTop&&$(window).scrollTop($("#response-chapter").offset().top))}}),!1}function LoadStories(e){return protocol=window.location.protocol,host=window.location.host,home_url=protocol+"//"+host,ajax_url=home_url+"/wp-admin/admin-ajax.php",$.ajax({url:ajax_url,type:"post",data:{action:"load_stories",posts_per_page:e},beforeSend:function(e){},success:function(e){$("#response-stories").html(e)}}),!1}function LoadArea(e){return protocol=window.location.protocol,host=window.location.host,home_url=protocol+"//"+host,ajax_url=home_url+"/wp-admin/admin-ajax.php",$.ajax({url:ajax_url,type:"post",data:{action:"load_area",area:e},beforeSend:function(e){},success:function(e){$("html, body").scrollTop($("#response-area").offset().top-20),$("#response-area").hide().html(e).fadeIn(200)}}),!1}function LoadSearchResults(e){return protocol=window.location.protocol,host=window.location.host,home_url=protocol+"//"+host,ajax_url=home_url+"/wp-admin/admin-ajax.php",$.ajax({url:ajax_url,type:"post",data:{action:"load_search",keyword:e},beforeSend:function(e){},success:function(e){$("#search-results").html(e)}}),!1}function LoadAmbassadors(e,o){return protocol=window.location.protocol,host=window.location.host,home_url=protocol+"//"+host,ajax_url=home_url+"/wp-admin/admin-ajax.php",$.ajax({url:ajax_url,type:"post",data:{action:"load_ambassadors",lep:e,sector:o},beforeSend:function(e){},success:function(e){$("#response-ambassadors").html(e)}}),!1}function setCookie(e,o,a){var t=new Date;t.setTime(t.getTime()+24*a*60*60*1e3);var r="expires="+t.toUTCString();document.cookie=e+"="+o+";"+r+";path=/"}function getCookie(e){for(var o=e+"=",a=document.cookie.split(";"),t=0;t<a.length;t++){for(var r=a[t];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(o))return r.substring(o.length,r.length)}return""}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:54.4071355,lng:-1.7539647},zoom:6,zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,styles:[{featureType:"administrative",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100},{lightness:"50"},{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"all",stylers:[{lightness:"30"}]},{featureType:"road.local",elementType:"all",stylers:[{lightness:"40"}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"water",elementType:"all",stylers:[{color:"#d2d2d2"},{visibility:"on"}]},{featureType:"water",elementType:"labels",stylers:[{lightness:-25},{saturation:-100}]}]}),geocoder=new google.maps.Geocoder}function SearchMarkers(){var e=$("#search_markers").data("url"),o=$("#input_address").val(),a=$("#input_business option:selected").text();return $.ajax({url:e,type:"post",data:{action:"load_posts",speciality:a},beforeSend:function(e){},success:function(e){$("#map-container").html(e),$("#map-container").css("visibility","hidden"),show_results(o)}}),!1}function show_results(e){setMapOnAll(null),markers=[],add_markers(),find_addres(e)}function setMapOnAll(){for(var e=0;e<markers.length;e++)markers[e].setMap(null)}function add_markers(){protocol=window.location.protocol,host=window.location.host,home_url=protocol+"//"+host,array_lat=$("#loop-location").data("lat"),array_lng=$("#loop-location").data("lng"),array_description=$("#loop-location").data("description");for(var e=home_url+"/wp-content/themes/scaleUpTheme/assets/images/marker.png",o=0;o<array_lat.length;o++){var a=array_lat[o],t=array_lng[o],r=new google.maps.LatLng(a,t),n=array_description[o];markers[o]=new google.maps.Marker({position:r,map:map,description:n,id:o,icon:e,animation:google.maps.Animation.DROP})}}function find_addres(e){geocoder.geocode({address:e},function(e,o){if("OK"==o){var a=e[0].geometry.location;map.setCenter();new google.maps.Marker({map:map,icon:"http://localhost:8019/wp-content/themes/scaleUpTheme/assets/images/location.png",position:a});calculate_distances(a.lat(),a.lng())}else alert("Geocode was not successful for the following reason: "+o)})}function calculate_distances(e,o){var a=Math.PI,t=[],r=-1;for(lat1=e,lon1=o,i=0;i<markers.length;i++){var n=markers[i].position.lat(),s=markers[i].position.lng(),c=(n-lat1)*(a/180),l=(s-lon1)*(a/180),p=lat1*(a/180),d=n*(a/180),h=Math.sin(c/2)*Math.sin(c/2)+Math.sin(l/2)*Math.sin(l/2)*Math.cos(p)*Math.cos(d),u=6371*(2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h)));t[i]=u,(-1==r||u<t[r])&&(r=i)}distances_sorted=Array.from(t),distances_sorted.sort(function(e,o){return e-o});var m=new Array;for(i=0;i<distances_sorted.length;i++)for(dist_sort=distances_sorted[i],j=0;j<t.length;j++)dist=t[j],dist_sort==dist&&(m.push(markers[j]),$("#cards-list .card").eq(j).attr("id",i));markers=m,sort_results()}function sort_results(){$("#cards-list .card").sort(function(e,o){return parseInt(e.id)-parseInt(o.id)}).each(function(){var e=$(this);e.remove(),$(e).appendTo("#cards-list")}),$("#map-container").css("visibility","visible")}function redirectTo(e,o){o?window.open(e,"_blank"):window.location.href=e}