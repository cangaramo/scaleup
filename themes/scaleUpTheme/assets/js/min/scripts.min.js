var map,geocoder,home_url,markers=[],array_region=[],array_business=[],array_support=[],array_aims=[],array_cost=[],array_types=[],array_providers=[],one_to_watch=0,endorsed=0,posts_per_page=8;$(document).ready(function(){full_url=window.location.href,path_url=window.location.pathname,home_url=full_url.replace(path_url,""),$(".counter").counterUp({delay:10,time:1e3}),$("#submit-form").click(function(){SearchMarkers()}),$("input").on("keypress",function(e){13==(e.keyCode||e.which)&&SearchMarkers()}),$("body").on("mouseenter",".card",function(){$(this).css("background-color","#fdd38d"),index=$(this).attr("id");var e=home_url+"/wp-content/themes/scaleUpTheme/assets/images/marker_hover.png";markers[index].setIcon(e)}),$("body").on("mouseleave",".card",function(){$(this).css("background-color","white");var e=home_url+"/wp-content/themes/scaleUpTheme/assets/images/marker.png";markers[index].setIcon(e)}),$(".custom-link").mouseenter(function(){$(this).hasClass("active")||($(this).find(".line").removeClass("leaveLink"),$(this).find(".line").addClass("overLink"))}),$(".custom-link").mouseleave(function(){$(this).hasClass("active")||($(this).find(".line").removeClass("overLink"),$(this).find(".line").addClass("leaveLink"))});var e=1;if($(".slider").length>0){setInterval(function(){size=$(".text-slide").length,last=size-1,$(".text-slide").hide(),$(".text-slide").eq(e).fadeIn("slow"),(e+=1)==size&&(e=0)},1e4)}$("body").on("click",".submit-search",function(){array_region=[],array_business=[],array_support=[],array_aims=[],array_cost=[],array_types=[],array_providers=[],$(".tick input:checkbox").prop("checked",!1),region=$("#dropdown-region :selected").val(),type_business=$("#dropdown-type-business :selected").val(),type_support=$("#dropdown-type-support :selected").val(),""!=region&&array_region.push(region),""!=type_business&&array_business.push(type_business),""!=type_support&&array_support.push(type_support),LoadProgrammes(array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed),checkbox_region="#checkbox-"+region,checkbox_business="#checkbox-"+type_business,checkbox_support="#checkbox-"+type_support,$(checkbox_region).prop("checked",!0),$(checkbox_business).prop("checked",!0),$(checkbox_support).prop("checked",!0)}),$("body").on("click",".one-to-watch",function(){0==one_to_watch?(one_to_watch=1,$(this).find(".checkbox .fas").css("display","block")):(one_to_watch=0,$(this).find(".checkbox .fas").css("display","none")),LoadProgrammes(array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed)}),$("body").on("click",".endorsed",function(){$(this).find(".checkbox .fas").toggle(),0==endorsed?(endorsed=1,$(this).find(".checkbox .fas").css("display","block")):(endorsed=0,$(this).find(".checkbox .fas").css("display","none")),LoadProgrammes(array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed)}),$("body").on("click",".more-filters",function(){$(".filters-window").fadeIn("slow"),$(".close-filters").show()}),$("body").on("click",".close-filters",function(){$(".close-filters").hide(),$(".filters-window").fadeOut("slow")}),$("body").on("click",".filter-btn",function(){return array_region=$("input[name=checkbox-region]:checked").map(function(){return $(this).val()}).get(),array_business=$("input[name=checkbox-business]:checked").map(function(){return $(this).val()}).get(),array_support=$("input[name=checkbox-support]:checked").map(function(){return $(this).val()}).get(),array_aims=$("input[name=checkbox-aim]:checked").map(function(){return $(this).val()}).get(),array_cost=$("input[name=checkbox-cost]:checked").map(function(){return $(this).val()}).get(),array_types=$("input[name=checkbox-type]:checked").map(function(){return $(this).val()}).get(),array_providers=$("input[name=checkbox-provider]:checked").map(function(){return $(this).val()}).get(),LoadProgrammes(array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed),section=".all-programmes",$("html, body").animate({scrollTop:$(section).offset().top},500,function(){$(".close-filters").hide(),$(".filters-window").fadeOut(600)}),$("#dropdown-region").val(""),$("#dropdown-type-business").val(""),$("#dropdown-type-support").val(""),!1}),$("body").on("click",".all-stories",function(){num_posts=parseInt(posts_per_page),LoadStories(posts_per_page=num_posts+8)}),$("body").on("click",".chapter .header",function(){console.log("click"),img=$(this).find("img"),img.hasClass("arrow-down")?(console.log("yes"),img.removeClass("arrow-down"),img.addClass("arrow-up")):img.hasClass("arrow-up")&&(console.log("no"),img.removeClass("arrow-up"),img.addClass("arrow-down"))}),$("body").on("click",".load-chapter",function(){chapter=$(this).data("article"),console.log(chapter),LoadChapter(chapter)}),$("body").on("click",".open-content",function(){index=$(".open-content").index(this),$(".content-piece").hide(),$(".content-piece").eq(index).slideDown("slow")}),$("body").on("click",".close-content",function(){$(".content-box").fadeIn(),$(".content-piece").slideUp("slow")})}),$(window).on("load",function(){$(".programmes-list").length>0&&LoadProgrammes(array_region,array_business,array_support,array_aims,array_cost,array_types,array_providers,one_to_watch,endorsed),$(".list-stories").length>0&&LoadStories(posts_per_page),$(".scaleup-review").length>0&&(chapter=464,LoadChapter(chapter))}),$hidden=!1;var lastScrollTop=0;function LoadProgrammes(e,a,r,s,o,t,n,i,c){return ajax_url=home_url+"/wp-admin/admin-ajax.php",$.ajax({url:ajax_url,type:"post",data:{action:"load_programmes",region:e,type_business:a,type_support:r,aims:s,costs:o,types:t,providers:n,one_to_watch:i,endorsed:c},beforeSend:function(e){},success:function(e){$("#response-programmes").html(e)}}),!1}function LoadChapter(e){return ajax_url=home_url+"/wp-admin/admin-ajax.php",$.ajax({url:ajax_url,type:"post",data:{action:"load_chapter",chapter:e},beforeSend:function(e){},success:function(e){$("#response-chapter").html(e)}}),!1}function LoadStories(e){return ajax_url=home_url+"/wp-admin/admin-ajax.php",$.ajax({url:ajax_url,type:"post",data:{action:"load_stories",posts_per_page:e},beforeSend:function(e){},success:function(e){$("#response-stories").html(e)}}),!1}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:54.4071355,lng:-1.7539647},zoom:6,zoomControl:!0,streetViewControl:!1,mapTypeControl:!1,styles:[{featureType:"administrative",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"administrative.province",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape",elementType:"all",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{saturation:-100},{lightness:"50"},{visibility:"simplified"}]},{featureType:"road",elementType:"all",stylers:[{saturation:"-100"}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"all",stylers:[{lightness:"30"}]},{featureType:"road.local",elementType:"all",stylers:[{lightness:"40"}]},{featureType:"transit",elementType:"all",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"water",elementType:"all",stylers:[{color:"#d2d2d2"},{visibility:"on"}]},{featureType:"water",elementType:"labels",stylers:[{lightness:-25},{saturation:-100}]}]}),geocoder=new google.maps.Geocoder}function SearchMarkers(){var e=$("#search_markers").data("url"),a=$("#input_address").val(),r=$("#input_business option:selected").text();return $.ajax({url:e,type:"post",data:{action:"load_posts",speciality:r},beforeSend:function(e){},success:function(e){$("#map-container").html(e),$("#map-container").css("visibility","hidden"),show_results(a)}}),!1}function show_results(e){setMapOnAll(null),markers=[],add_markers(),find_addres(e)}function setMapOnAll(){for(var e=0;e<markers.length;e++)markers[e].setMap(null)}function add_markers(){array_lat=$("#loop-location").data("lat"),array_lng=$("#loop-location").data("lng"),array_description=$("#loop-location").data("description");for(var e=home_url+"/wp-content/themes/scaleUpTheme/assets/images/marker.png",a=0;a<array_lat.length;a++){var r=array_lat[a],s=array_lng[a],o=new google.maps.LatLng(r,s),t=array_description[a];markers[a]=new google.maps.Marker({position:o,map:map,description:t,id:a,icon:e,animation:google.maps.Animation.DROP})}}function find_addres(e){geocoder.geocode({address:e},function(e,a){if("OK"==a){var r=e[0].geometry.location;map.setCenter();new google.maps.Marker({map:map,icon:"http://localhost:8019/wp-content/themes/scaleUpTheme/assets/images/location.png",position:r});calculate_distances(r.lat(),r.lng())}else alert("Geocode was not successful for the following reason: "+a)})}function calculate_distances(e,a){var r=Math.PI,s=[],o=-1;for(lat1=e,lon1=a,i=0;i<markers.length;i++){var t=markers[i].position.lat(),n=markers[i].position.lng(),c=(t-lat1)*(r/180),l=(n-lon1)*(r/180),p=lat1*(r/180),d=t*(r/180),u=Math.sin(c/2)*Math.sin(c/2)+Math.sin(l/2)*Math.sin(l/2)*Math.cos(p)*Math.cos(d),h=6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)));s[i]=h,(-1==o||h<s[o])&&(o=i)}distances_sorted=Array.from(s),distances_sorted.sort(function(e,a){return e-a});var m=new Array;for(i=0;i<distances_sorted.length;i++)for(dist_sort=distances_sorted[i],j=0;j<s.length;j++)dist=s[j],dist_sort==dist&&(m.push(markers[j]),$("#cards-list .card").eq(j).attr("id",i));markers=m,sort_results()}function sort_results(){$("#cards-list .card").sort(function(e,a){return parseInt(e.id)-parseInt(a.id)}).each(function(){var e=$(this);e.remove(),$(e).appendTo("#cards-list")}),$("#map-container").css("visibility","visible")}function redirectTo(e,a){a?window.open(e,"_blank"):window.location.href=e}$(window).scroll(function(){var e=$(window).scrollTop();elemTop=$(".menu").offset().top,elemBottom=elemTop+$(".menu").height();var a=$(this).scrollTop();a>lastScrollTop?!$hidden&&e>elemTop&&($(".fixed-menu").show(),$(".static-menu").hide(),$hidden=!0):$hidden&&elemBottom>e&&($(".fixed-menu").hide(),$(".static-menu").show(),$hidden=!1),lastScrollTop=a});